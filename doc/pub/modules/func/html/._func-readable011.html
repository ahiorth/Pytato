<!--
HTML file automatically generated from DocOnce source
(https://github.com/doconce/doconce/)
doconce format html main_func.do.txt CHAPTER=document BOOK=document APPENDIX=document --html_style=bootswatch_readable --html_output=func-readable --html_code_style=inherit --encoding=utf-8
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/doconce/doconce/" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Create your own functions">
<meta name="keywords" content="docstring,positional arguments,default arguments,try, and except,raise,assert">
<title>Create your own functions</title>
<!-- Bootstrap style: bootswatch_readable -->
<!-- doconce format html main_func.do.txt CHAPTER=document BOOK=document APPENDIX=document --html_style=bootswatch_readable --html_output=func-readable --html_code_style=inherit --encoding=utf-8 -->
<link href="https://netdna.bootstrapcdn.com/bootswatch/3.1.1/readable/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->
<style type="text/css">
/* Let inline verbatim have the same color as the surroundings */
code { color: inherit; background-color: transparent; }
/* Add scrollbar to dropdown menus in bootstrap navigation bar */
.dropdown-menu {
   height: auto;
   max-height: 400px;
   overflow-x: hidden;
}
/* Adds an invisible element before each target to offset for the navigation
   bar */
.anchor::before {
  content:"";
  display:block;
  height:64px;      /* fixed header height for style bootswatch_readable */
  margin:-64px 0 0; /* negative fixed header height */
}
</style>
</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [('Table of contents',
               1,
               'table_of_contents',
               'table_of_contents'),
              ('What is a function?', 1, None, 'what-is-a-function'),
              ('How to create a function in Python',
               2,
               None,
               'how-to-create-a-function-in-python'),
              ('When to define a function?',
               1,
               None,
               'when-to-define-a-function'),
              ('What is a good function?', 2, None, 'what-is-a-good-function'),
              ('Special use of functions', 1, None, 'special-use-of-functions'),
              ('Example: remove white space from rows in Pandas',
               3,
               None,
               'example-remove-white-space-from-rows-in-pandas'),
              ('Pythons lambda function', 1, None, 'pythons-lambda-function'),
              ('Exercise:  Create a function from the following code',
               1,
               None,
               'exercise-create-a-function-from-the-following-code'),
              ('Making functions more general',
               1,
               None,
               'making-functions-more-general'),
              ('Improving robustness of functions',
               1,
               None,
               'improving-robustness-of-functions'),
              ('Assert, raise and try statements',
               1,
               None,
               'assert-raise-and-try-statements'),
              ('Try and Except', 2, None, 'try-and-except'),
              ('Raise', 2, None, 'raise'),
              ('Exercise: Improve `replace_chars` using raise',
               3,
               None,
               'exercise-improve-replace_chars-using-raise'),
              ('Using assert to test our code',
               1,
               None,
               'using-assert-to-test-our-code'),
              ('Bibliography', 1, None, 'bibliography')]}
end of tocinfo -->

<body>
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="func-readable.html">Create your own functions</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._func-readable000.html#table_of_contents" style="font-size: 80%;"><b>Table of contents</b></a></li>
     <!-- navigation toc: --> <li><a href="._func-readable001.html#what-is-a-function" style="font-size: 80%;"><b>What is a function?</b></a></li>
     <!-- navigation toc: --> <li><a href="._func-readable002.html#how-to-create-a-function-in-python" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How to create a function in Python</a></li>
     <!-- navigation toc: --> <li><a href="._func-readable003.html#when-to-define-a-function" style="font-size: 80%;"><b>When to define a function?</b></a></li>
     <!-- navigation toc: --> <li><a href="._func-readable004.html#what-is-a-good-function" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;What is a good function?</a></li>
     <!-- navigation toc: --> <li><a href="._func-readable005.html#special-use-of-functions" style="font-size: 80%;"><b>Special use of functions</b></a></li>
     <!-- navigation toc: --> <li><a href="._func-readable005.html#example-remove-white-space-from-rows-in-pandas" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Example: remove white space from rows in Pandas</a></li>
     <!-- navigation toc: --> <li><a href="._func-readable006.html#pythons-lambda-function" style="font-size: 80%;"><b>Pythons lambda function</b></a></li>
     <!-- navigation toc: --> <li><a href="._func-readable007.html#exercise-create-a-function-from-the-following-code" style="font-size: 80%;"><b>Exercise:  Create a function from the following code</b></a></li>
     <!-- navigation toc: --> <li><a href="._func-readable009.html#making-functions-more-general" style="font-size: 80%;"><b>Making functions more general</b></a></li>
     <!-- navigation toc: --> <li><a href="._func-readable010.html#improving-robustness-of-functions" style="font-size: 80%;"><b>Improving robustness of functions</b></a></li>
     <!-- navigation toc: --> <li><a href="#assert-raise-and-try-statements" style="font-size: 80%;"><b>Assert, raise and try statements</b></a></li>
     <!-- navigation toc: --> <li><a href="#try-and-except" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Try and Except</a></li>
     <!-- navigation toc: --> <li><a href="#raise" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Raise</a></li>
     <!-- navigation toc: --> <li><a href="#exercise-improve-replace_chars-using-raise" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exercise: Improve <code>replace_chars</code> using raise</a></li>
     <!-- navigation toc: --> <li><a href="._func-readable012.html#using-assert-to-test-our-code" style="font-size: 80%;"><b>Using assert to test our code</b></a></li>
     <!-- navigation toc: --> <li><a href="._func-readable012.html#bibliography" style="font-size: 80%;"><b>Bibliography</b></a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->
<div class="container">
<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->
<a name="part0011"></a>
<!-- !split -->
<h1 id="assert-raise-and-try-statements" class="anchor">Assert, raise and try statements </h1>
<p>Still there are plenty of things that can go wrong with our function. In many cases you would like to catch errors as quickly as possible, to help users to discover where the errors occurs. Lets look at an example, lets say we wrongly use our function</p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">replace_chars(<span style="color: #666666">2</span>)
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>We get</p>
<div class="alert alert-block alert-danger alert-text-normal"><b>Warning</b>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #ffffff">
  <pre style="line-height: 125%;">new_name <span style="color: #666666">=</span> name
           <span style="color: #008000; font-weight: bold">for</span> ch,nch <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">zip</span>(chars,new_chars):
<span style="color: #666666">----&gt;</span>          new_name <span style="color: #666666">=</span> new_name<span style="color: #666666">.</span>replace(ch, nch)
           <span style="color: #008000; font-weight: bold">return</span> new_name

<span style="color: #CB3F38; font-weight: bold">AttributeError</span>: <span style="color: #BA2121">&#39;int&#39;</span> <span style="color: #008000">object</span> has no attribute <span style="color: #BA2121">&#39;replace&#39;</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<p>Note that the errors only occurs when we call <code>new_name.replace</code>, because we used an integer as an argument. An integer does not have a function named <code>replace()</code>, but the errors happens earlier because we used the function <code>replace_chars</code> wrongly. Thus, it would be much better if we could catch the error at a very early stage and give the user an error message.</p>
<h2 id="try-and-except" class="anchor">Try and Except </h2>
<p>Try and except, is actually as simple as it sounds. It is a way to tell Python to try a piece of code, if the piece of code fails, we move to the except statement. Following this a lazy, and crude way of improving our function is to declare our function as</p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">replace_chars</span>(name,<span style="color: #666666">*</span>,chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot; &quot;</span>, <span style="color: #BA2121">&quot;/&quot;</span>],new_chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot;&quot;</span>,<span style="color: #BA2121">&quot;_&quot;</span>]):
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&#39;&#39;&#39; replace Norwegian characters and space in names&#39;&#39;&#39;</span>
    <span style="color: #008000; font-weight: bold">try</span>:
        new_name <span style="color: #666666">=</span> name
        <span style="color: #008000; font-weight: bold">for</span> ch,nch <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">zip</span>(chars,new_chars):
            new_name <span style="color: #666666">=</span> new_name<span style="color: #666666">.</span>replace(ch, nch)
        <span style="color: #008000; font-weight: bold">return</span> new_name
    <span style="color: #008000; font-weight: bold">except</span>:
        <span style="color: #008000">print</span>(<span style="color: #BA2121">&#39;Something went wrong in replace_chars&#39;</span>)

replace_chars(<span style="color: #666666">2</span>)<span style="color: #3D7B7B; font-style: italic"># prints Something went wrong in replace_chars</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Now the code prints out a message if something is not working. There are several drawbacks</p>
<ol>
<li> The code is still running, even if something went wrong, the program should stop with an error message</li>
<li> We do not know exactly where something went wrong, it could be that <code>name</code> is not a string, but it could also be e.g. that the user enters a different length for <code>chars</code> and <code>new_chars</code></li>
</ol>
<h2 id="raise" class="anchor">Raise </h2>
<p>We can raise errors by using the keyword <code>raise</code>. The <code>raise</code> keyword needs to be followed by a function from the <a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy" target="_self"><tt>BaseException class</tt></a>, typically you might use <code>raise Exception('Something went wrong in replace_chars')</code></p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">replace_chars</span>(name,<span style="color: #666666">*</span>,chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot; &quot;</span>, <span style="color: #BA2121">&quot;/&quot;</span>],new_chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot;&quot;</span>,<span style="color: #BA2121">&quot;_&quot;</span>]):
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&#39;&#39;&#39; replace Norwegian characters and space in names&#39;&#39;&#39;</span>
    <span style="color: #008000; font-weight: bold">try</span>:
        new_name <span style="color: #666666">=</span> name
        <span style="color: #008000; font-weight: bold">for</span> ch,nch <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">zip</span>(chars,new_chars):
            new_name <span style="color: #666666">=</span> new_name<span style="color: #666666">.</span>replace(ch, nch)
        <span style="color: #008000; font-weight: bold">return</span> new_name
    <span style="color: #008000; font-weight: bold">except</span>:
        <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">Exception</span>(<span style="color: #BA2121">&#39;Something went wrong in replace_chars&#39;</span>)

replace_chars(<span style="color: #666666">2</span>)<span style="color: #3D7B7B; font-style: italic"># prints Something went wrong in replace_chars</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>Running the following code</p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">replace_chars(<span style="color: #666666">2</span>)
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>We get</p>
<div class="alert alert-block alert-danger alert-text-normal"><b>Warning</b>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #ffffff">
  <pre style="line-height: 125%;"> <span style="color: #008000; font-weight: bold">except</span>:
<span style="color: #666666">---&gt;</span>    <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">Exception</span>(<span style="color: #BA2121">&#39;Something went wrong in replace_chars&#39;</span>)
     replace_chars(<span style="color: #666666">2</span>)

<span style="color: #CB3F38; font-weight: bold">Exception</span>: Something went wrong <span style="color: #AA22FF; font-weight: bold">in</span> replace_chars
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<p>As compared to before we raise the exception when our function is called and not when the <code>string.replace()</code> function is called.</p>

<div class="alert alert-block alert-success alert-text-normal"><b>Exceptions should be specific</b>
<p>When raising errors, we should try to be as specific as possible to help the user as much as possible.</p>
</div>


<p>Let us extend our function using more specific raises</p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">replace_chars</span>(name,<span style="color: #666666">*</span>,chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot; &quot;</span>, <span style="color: #BA2121">&quot;/&quot;</span>],new_chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot;&quot;</span>,<span style="color: #BA2121">&quot;_&quot;</span>]):
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&#39;&#39;&#39; replace Norwegian characters and space in names&#39;&#39;&#39;</span>
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">type</span>(name)<span style="color: #666666">!=</span><span style="color: #008000">str</span>:
        <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">ValueError</span>(<span style="color: #BA2121">&#39;replace_chars: name must be a string&#39;</span>)
    new_name <span style="color: #666666">=</span> name
    <span style="color: #008000; font-weight: bold">for</span> ch,nch <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">zip</span>(chars,new_chars):
        new_name <span style="color: #666666">=</span> new_name<span style="color: #666666">.</span>replace(ch, nch)
    <span style="color: #008000; font-weight: bold">return</span> new_name
replace_chars(<span style="color: #666666">2</span>)<span style="color: #3D7B7B; font-style: italic"># ValueError: replace_chars: name must be a string</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>
<h3 id="exercise-improve-replace_chars-using-raise" class="anchor">Exercise: Improve <code>replace_chars</code> using raise  </h3>

<p>
<b>Question:</b>
How can we improve <code>replace_chars</code> to make sure that the length of <code>chars</code> and <code>new_chars</code> are of equal length?</p>

<p>
<b>Solution:</b>
</p>


<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">replace_chars</span>(name,<span style="color: #666666">*</span>,chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot; &quot;</span>, <span style="color: #BA2121">&quot;/&quot;</span>],new_chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot;&quot;</span>,<span style="color: #BA2121">&quot;_&quot;</span>]):
<span style="color: #bbbbbb">    </span><span style="color: #BA2121; font-style: italic">&#39;&#39;&#39; replace Norwegian characters and space in names&#39;&#39;&#39;</span>
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">type</span>(name)<span style="color: #666666">!=</span><span style="color: #008000">str</span>:
        <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">ValueError</span>(<span style="color: #BA2121">&#39;replace_chars: name must be a string&#39;</span>)
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">len</span>(chars) <span style="color: #666666">!=</span> <span style="color: #008000">len</span>(new_chars):
        <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">ValueError</span>(<span style="color: #BA2121">&#39;replace_chars: chars and new_chars must same size&#39;</span>)
    new_name <span style="color: #666666">=</span> name
    <span style="color: #008000; font-weight: bold">for</span> ch,nch <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">zip</span>(chars,new_chars):
        new_name <span style="color: #666666">=</span> new_name<span style="color: #666666">.</span>replace(ch, nch)
    <span style="color: #008000; font-weight: bold">return</span> new_name
replace_chars(<span style="color: #BA2121">&#39;2&#39;</span>,chars<span style="color: #666666">=</span>[<span style="color: #BA2121">&quot;/&quot;</span>])<span style="color: #3D7B7B; font-style: italic"># ValueError: replace_chars: chars and new_chars must same size</span>
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>

<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">

  <li class="previous">
    <a href="._func-readable010.html">&larr; Prev</a>
  </li>

  <li class="next">
    <a href="._func-readable012.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->
</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<!-- Bootstrap footer
<footer>
<a href="https://..."><img width="250" align=right src="https://..."></a>
</footer>
-->
</body>
</html>
    

